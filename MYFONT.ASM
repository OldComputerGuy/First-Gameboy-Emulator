;*****************************************************************************
;			 St„ld min egen EGA mode
;			 ~~~~~~~~~~~~~~~~~~~~~~~
;   Jag har skrivit detta program, f”r att jag ha bara en EGA bildsk„rm
;	      som kan inte visa mig 80x50 mode, s† har kul.
;			     A.R.Hartley
;
; ANDY HERE IS MY 80X50 MODE SETTING PROGRAM, SORRY ABOUT THE SWEDISH, BUT
;	I'VE BEEN TRYING TO IMPROVE IT BY COMMENTING IN SWEDISH.
;		    I HAVE TRANSLATED WHERE NESSASARY.
;*****************************************************************************

;************************************
;     Emulate 80x50 mode in EGA
;     ~~~~~~~~~~~~~~~~~~~~~~~~~
;Anv„nder 8x8 fonten, men s„tt reg 9
;  av 6845 till 6, d„rf”r reducera
;    b”kstavningen vid en pixel.
;
; USE AN 8X8 FONT, BUT SET REG 9 OF
; 6845 TO 6, THEREFORE REDUCING THE
;	   CHAR HIGHT BY 1.
;************************************

emu_80x50:
		mov	ax,0002h		;s„tt mode 2
		int	10h

		xor	bl,bl			;set video to 8x8 font
		mov	ax,1112h
		int	10h

		mov	ax,cs			;set up segment of font
		mov	es,ax			;done that, what now ?

		mov	bp,offset myfont	;och den address

		mov	cx,100h			;amount of chars
		mov	dx,0			;offset into table (firstchr)

		mov	bh,08h			;bytes per char
		mov	bl,00h			;block to load (start chr)

		mov	ax,1100h
		int	10h

		mov	dx,3d4h			;s„tt char h”gst till 7
		mov	ax,0609h		;set char hight to 7
		out	dx,ax
		ret

;************************************
;	      8x8 font
;    but it only uses 7 lines
;************************************

		even
myfont:
	db	0,0,0,0,0,0,0,0,126,129,165,129,189,153,129,126
	db	126,255,219,255,195,231,255,126,108,254,254,124,56,16,0,0
	db	16,56,124,124,56,16,0,0,56,124,56,254,254,124,56,124
	db	16,16,56,124,254,124,56,124,0,0,0,0,0,0,0,0
	db	0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
	db	0,0,0,0,0,0,0,0,15,7,127,205,204,204,120,0
	db	60,102,102,60,24,126,24,0,0,0,0,0,0,0,0,0
	db	127,99,127,99,103,230,192,0,153,90,60,231,231,60,90,153
	db	192,240,252,240,192,0,0,0,3,15,63,15,3,0,0,0
	db	24,60,126,24,24,126,60,24,102,102,102,102,0,102,0,0
	db	127,219,219,123,27,27,0,0,62,99,56,108,56,204,120,0
	db	0,0,0,126,126,126,0,0,60,126,24,126,60,24,255,0
	db	24,60,126,24,24,24,0,0,24,24,24,126,60,24,0,0
	db	0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
	db	0,0,192,192,192,254,0,0,0,36,102,255,102,36,0,0
	db	0,24,60,126,255,255,0,0,0,255,255,126,60,24,0,0
	db	0,0,0,0,0,0,0,0,48,120,120,48,0,48,0,0
	db	108,108,108,0,0,0,0,0,108,254,108,254,108,108,0,0
	db	48,124,192,120,12,248,48,0,198,204,24,48,102,198,0,0
	db	56,108,56,118,204,118,0,0,96,96,192,0,0,0,0,0
	db	24,48,96,96,48,24,0,0,96,48,24,24,48,96,0,0
	db	0,102,60,255,60,102,0,0,0,48,48,252,48,48,0,0
	db	0,0,0,0,48,48,96,0,0,0,0,252,0,0,0,0
	db	0,0,0,0,48,48,0,0,6,12,24,48,96,192,0,0
	db	124,206,214,214,230,124,0,0,48,112,48,48,48,252,0,0
	db	120,204,24,48,96,252,0,0,120,140,56,12,140,120,0,0
	db	56,120,216,252,24,60,0,0,252,192,248,12,204,120,0,0
	db	120,192,248,204,204,120,0,0,252,204,12,24,48,48,0,0
	db	120,204,120,204,204,120,0,0,120,204,124,12,24,112,0,0
	db	0,48,48,0,48,48,0,0,0,48,48,0,48,48,96,0
	db	12,24,48,96,48,24,12,0,0,0,252,0,252,0,0,0
	db	48,24,12,6,12,24,48,0,120,140,24,48,0,48,0,0
	db	124,198,222,222,192,120,0,0,48,120,204,252,204,204,0,0
	db	252,102,124,102,102,252,0,0,124,198,192,192,198,124,0,0
	db	248,108,102,102,108,248,0,0,254,98,120,96,98,254,0,0
	db	254,98,120,96,96,240,0,0,60,102,192,206,102,62,0,0
	db	204,204,252,204,204,204,0,0,120,48,48,48,48,120,0,0
	db	30,12,12,204,204,120,0,0,230,108,120,108,102,230,0,0
	db	240,96,96,98,102,254,0,0,198,238,254,214,198,198,0,0
	db	198,230,222,206,198,198,0,0,56,108,198,198,108,56,0,0
	db	252,102,124,96,96,240,0,0,120,204,204,220,120,28,0,0
	db	252,102,124,108,102,230,0,0,120,204,96,24,204,120,0,0
	db	252,180,48,48,48,120,0,0,204,204,204,204,204,252,0,0
	db	204,204,204,204,120,48,0,0,198,198,214,254,238,198,0,0
	db	198,108,56,56,108,198,0,0,204,204,120,48,48,120,0,0
	db	254,204,24,48,102,254,0,0,120,96,96,96,96,120,0,0
	db	64,96,48,24,12,4,0,0,120,24,24,24,24,120,0,0
	db	16,56,108,198,0,0,0,0,0,0,0,0,0,0,255,0
	db	48,48,24,0,0,0,0,0,0,120,12,124,204,118,0,0
	db	224,96,124,102,102,220,0,0,0,120,204,192,204,120,0,0
	db	28,12,124,204,204,118,0,0,0,120,204,252,192,120,0,0
	db	56,108,96,240,96,240,0,0,0,118,204,204,124,12,248,0
	db	224,108,118,102,102,230,0,0,48,0,112,48,48,120,0,0
	db	12,0,12,12,204,204,120,0,224,102,108,120,108,230,0,0
	db	112,48,48,48,48,120,0,0,0,204,254,254,214,198,0,0
	db	0,248,204,204,204,204,0,0,0,120,204,204,204,120,0,0
	db	0,220,102,102,124,96,240,0,0,118,204,204,124,12,30,0
	db	0,220,118,102,96,240,0,0,0,124,192,120,12,248,0,0
	db	48,124,48,48,52,24,0,0,0,204,204,204,204,118,0,0
	db	0,204,204,204,120,48,0,0,0,198,214,254,254,108,0,0
	db	0,198,108,56,108,198,0,0,0,204,204,204,124,12,248,0
	db	0,252,152,48,100,252,0,0,28,48,224,48,48,28,0,0
	db	24,24,24,0,24,24,0,0,224,48,28,48,48,224,0,0
	db	118,220,0,0,0,0,0,0,16,56,108,198,198,254,0,0
	db	120,204,192,204,120,12,120,0,0,204,0,204,204,204,126,0
	db	28,0,120,204,252,192,120,0,126,195,60,6,62,102,63,0
	db	204,0,120,12,124,204,126,0,224,0,120,12,124,204,126,0
	db	48,48,120,12,124,204,126,0,0,0,120,192,192,120,12,56
	db	126,195,60,102,126,96,60,0,204,0,120,204,252,192,120,0
	db	224,0,120,204,252,192,120,0,204,0,112,48,48,48,120,0
	db	124,198,56,24,24,24,60,0,224,0,112,48,48,48,120,0
	db	198,56,108,198,254,198,198,0,48,48,0,120,204,252,204,0
	db	28,0,252,96,120,96,252,0,0,0,127,12,127,204,127,0
	db	62,108,204,254,204,204,206,0,120,204,0,120,204,204,120,0
	db	0,204,0,120,204,204,120,0,0,224,0,120,204,204,120,0
	db	120,204,0,204,204,204,126,0,0,224,0,204,204,204,126,0
	db	0,204,0,204,204,124,12,248,195,24,60,102,102,60,24,0
	db	204,0,204,204,204,204,120,0,24,24,126,192,192,126,24,24
	db	56,108,100,240,102,252,0,0,204,204,120,252,48,252,48,48
	db	248,204,204,250,198,207,198,199,14,27,24,60,24,24,216,112
	db	28,0,120,12,124,204,126,0,56,0,112,48,48,48,120,0
	db	0,28,0,120,204,204,120,0,0,28,0,204,204,204,126,0
	db	0,248,0,248,204,204,204,0,252,0,204,236,252,220,204,0
	db	60,108,108,62,0,126,0,0,56,108,108,56,0,124,0,0
	db	48,0,48,96,192,204,120,0,0,0,252,192,192,0,0,0
	db	0,0,252,12,12,0,0,0,195,198,204,222,51,102,204,15
	db	195,198,204,219,55,111,207,3,24,24,0,24,24,24,24,0
	db	0,51,102,204,102,51,0,0,0,204,102,51,102,204,0,0
	db	34,136,34,136,34,136,34,136,85,170,85,170,85,170,85,170
	db	219,119,219,238,219,119,219,238,24,24,24,24,24,24,24,24
	db	24,24,24,24,248,24,24,24,24,24,248,24,248,24,24,24
	db	54,54,54,54,246,54,54,54,0,0,0,0,254,54,54,54
	db	0,0,248,24,248,24,24,24,54,54,246,6,246,54,54,54
	db	54,54,54,54,54,54,54,54,0,0,254,6,246,54,54,54
	db	54,54,246,6,254,0,0,0,54,54,54,54,254,0,0,0
	db	24,24,248,24,248,0,0,0,0,0,0,0,248,24,24,24
	db	24,24,24,24,31,0,0,0,24,24,24,24,255,0,0,0
	db	0,0,0,0,255,24,24,24,24,24,24,24,31,24,24,24
	db	0,0,0,0,255,0,0,0,24,24,24,24,255,24,24,24
	db	24,24,31,24,31,24,24,24,54,54,54,54,55,54,54,54
	db	54,54,55,48,63,0,0,0,0,0,63,48,55,54,54,54
	db	54,54,247,0,255,0,0,0,0,0,255,0,247,54,54,54
	db	54,54,55,48,55,54,54,54,0,0,255,0,255,0,0,0
	db	54,54,247,0,247,54,54,54,24,24,255,0,255,0,0,0
	db	54,54,54,54,255,0,0,0,0,0,255,0,255,24,24,24
	db	0,0,0,0,255,54,54,54,54,54,54,54,63,0,0,0
	db	24,24,31,24,31,0,0,0,0,0,31,24,31,24,24,24
	db	0,0,0,0,63,54,54,54,54,54,54,54,255,54,54,54
	db	24,24,255,24,255,24,24,24,24,24,24,24,248,0,0,0
	db	0,0,0,0,31,24,24,24,255,255,255,255,255,255,255,255
	db	0,0,0,0,255,255,255,255,240,240,240,240,240,240,240,240
	db	15,15,15,15,15,15,15,15,255,255,255,255,0,0,0,0
	db	0,0,118,220,200,220,118,0,0,120,204,248,204,248,192,192
	db	0,252,204,192,192,192,192,0,0,254,108,108,108,108,108,0
	db	252,204,96,48,96,204,252,0,0,0,126,216,216,216,112,0
	db	0,102,102,102,102,124,96,192,0,118,220,24,24,24,24,0
	db	252,48,120,204,204,120,48,252,56,108,198,254,198,108,56,0
	db	56,108,198,198,108,108,238,0,28,48,24,124,204,204,120,0
	db	0,0,126,219,219,126,0,0,6,12,126,219,219,126,96,192
	db	56,96,192,248,192,96,56,0,120,204,204,204,204,204,204,0
	db	0,252,0,252,0,252,0,0,48,48,252,48,48,0,252,0
	db	96,48,24,48,96,0,252,0,24,48,96,48,24,0,252,0
	db	14,27,27,24,24,24,24,24,24,24,24,24,24,216,216,112
	db	48,48,0,252,0,48,48,0,0,118,220,0,118,220,0,0
	db	56,108,108,56,0,0,0,0,0,0,0,24,24,0,0,0
	db	0,0,0,0,24,0,0,0,15,12,12,12,236,108,60,28
	db	120,108,108,108,108,0,0,0,112,24,48,96,120,0,0,0
	db	0,0,60,60,60,60,0,0,0,0,0,0,0,0,0,0
